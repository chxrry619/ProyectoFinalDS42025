{% extends 'base.html' %}

{% block title %}Inicio - Catálogo de Revistas{% endblock %}

{% block content %}
<div class="mt-4">
  {% if query %}
    <h5 class="mb-3">Resultados para: <span class="text-primary">"{{ query }}"</span></h5>
    {% if resultados %}
      <div class="list-group">
        {% for pub in resultados %}
          <div class="list-group-item">
            <h5>{{ pub.titulo }}</h5>
            <p>
              <strong>Área:</strong> {{ pub.area_categoria }}<br>
              <strong>Editorial:</strong> {{ pub.editorial }}<br>
              <strong>H-Index:</strong> {{ pub.h_index }}<br>
              <strong>ISSN:</strong> {{ pub.issn }}<br>
              <a href="{{ pub.sitio_web }}" class="btn btn-sm btn-outline-primary mt-2" target="_blank">Ver publicación</a>
            </p>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <div class="alert alert-warning">
        No se encontraron resultados para <strong>{{ query }}</strong>.
      </div>
    {% endif %}
  {% else %}
    <h3 class="mb-3">Bienvenido al Catálogo de Revistas</h3>
    <p class="lead">Explora publicaciones académicas registradas en Scimago Journal Rank por área temática, editorial y más.</p>
    <p>Utiliza el menú superior o la barra de búsqueda para comenzar.</p>
  {% endif %}

  <!-- Botón para iniciar sesión -->
  {% if not session.get('username') %}
    <a href="{{ url_for('login') }}" class="btn btn-primary mt-4">Iniciar sesión</a>
  {% else %}
    <p class="mt-3">Hola, {{ session['username'] }}! <a href="{{ url_for('logout') }}" class="btn btn-outline-danger btn-sm">Cerrar sesión</a></p>
  {% endif %}
</div>
{% endblock %}
